<template>
    <div id="article-detail">
        <div class="title">
            {{article.title}}
        </div>
        <div class="tag">
            <span>时间 : 2017-1-1</span>
            <span>作者 : Winfred</span>
            <span>阅读 : 128</span>
            <span>评论 : 15</span>
        </div>
        <div class="content" id="content">
            {{article.content}}
        </div>
    </div>
</template>
<script>
    var Markdown = require('markdown2').Converter;
    var converter = new Markdown();
    export default {
        data: function () {
            return {
                article: {}
            }
        },
        created: function () {
            debugger;
            var rA = this.$route.params.article;
            if (rA) {
                this.article = this.$route.params.article;
            } else {
                this.getArticel();
            }
        },
        mounted: function () {
            this.update();
        },
        methods: {
            update: function () {
                document.getElementById('content').innerHTML = converter.makeHtml(this.article.content);
            },
            getArticel: function () {
                var url = 'article/' + this.$route.params.id
                this.$http.get(url).then((response) => {
                    this.article = response.data[0];
                    this.update();
                });
            }
        }
    }

</script>
<style>
    #article-detail {
        background-color: #fff;
        padding: 15px;
    }

    #article-detail .title {
        font-size:20px;
        margin: 5px 0px;
    }

    #article-detail .tag {
        font-size: 9px;
        color: #999;
        margin: 10px 0px;
        text-align: right;
    }
    #article-detail .tag span {
        margin-left: 10px;
    }
</style>